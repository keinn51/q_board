{"version":3,"file":"321.js","mappings":"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","sources":["webpack://lee/./cert/AuthStorage.ts","webpack://lee/./css/Article/Article.css?679f","webpack://lee/./pages/Article/index.tsx","webpack://lee/./css/Article/Article.css"],"sourcesContent":["import { AuthStorageType, LoginType } from \"@globalObj/types\";\n\nconst AUTH = 'auth';\nconst expireDays = 3;\n\nexport function clearAuth() {\n    localStorage.clear();\n}\n\nexport function saveAuth(token: LoginType) {\n    localStorage.setItem(AUTH, JSON.stringify({...token, expire:  Date.now() + expireDays * 24 * 60 * 60 * 1000}));\n}\n\nexport function getAuth(): AuthStorageType | null {\n    if (!localStorage.getItem(AUTH))\n        return null;\n    const authObj = JSON.parse(localStorage.getItem(AUTH) as string);\n    if (Date.now() > authObj['expire']) {\n        clearAuth();\n        return null;\n    }\n    return authObj;\n}\n\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./Article.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./Article.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect } from 'react';\nimport axios from 'axios';\nimport { useState } from 'react';\nimport { getAuth } from '@cert/AuthStorage';\nimport { AuthStorageType } from '@globalObj/types';\nimport '@css/Article/Article.css';\nimport { useNavigate, useParams } from 'react-router';\n\nconst Article = () => {\n  const { articleId } = useParams();\n  const navigate = useNavigate();\n  const [articleObj, setArticleObj] = useState(null);\n  const [commentsArr, setCommentsArr] = useState([]);\n  const [articleContent, setArticleContent] = useState('');\n\n  const getArticleInfo = () => {\n    axios\n      .get(`http://${process.env.IP_ADDRESS}/board/get_article.php?boardId=${articleId}`)\n      .then((res) => {\n        setArticleObj(res.data);\n      })\n      .catch((error) => {\n        alert(error.response.data);\n      });\n  };\n\n  const getCommentsInfo = () => {\n    axios\n      .get(`http://${process.env.IP_ADDRESS}/comment/get_comments.php?boardId=${articleId}`)\n      .then((res) => {\n        setCommentsArr(res.data);\n      })\n      .catch((error) => {\n        alert(error.response.data);\n      });\n  };\n\n  const postComment = () => {\n    if (getAuth() && articleId) {\n      axios\n        .post(`http://${process.env.IP_ADDRESS}/comment/post_comment.php`, {\n          boardId: parseInt(articleId, 10),\n          loginId: (getAuth() as AuthStorageType)['loginId'],\n          userId: (getAuth() as AuthStorageType)['userId'],\n          content: articleContent,\n        })\n        .then(() => {\n          alert('댓글 달기 성공');\n          getCommentsInfo();\n        })\n        .catch((error) => {\n          alert(error.response.data);\n        });\n    } else alert('로그인을 해주세요');\n  };\n\n  const deleteArticle = () => {\n    if (getAuth() && articleId) {\n      if (window.confirm('정말로 삭제하시겠습니까?')) {\n        axios\n          .post(`http://${process.env.IP_ADDRESS}/board/delete_article.php`, {\n            boardId: parseInt(articleId, 10),\n            userId: (getAuth() as AuthStorageType)['userId'],\n          })\n          .then(() => {\n            alert('글 삭제 성공');\n            navigate('/');\n          })\n          .catch((error) => {\n            alert(error.response.data);\n          });\n      }\n    } else alert('로그인을 해주세요');\n  };\n\n  const deleteComment = (commentId: number) => {\n    if (getAuth()) {\n      if (window.confirm('정말로 삭제하시겠습니까?')) {\n        axios\n          .post(`http://${process.env.IP_ADDRESS}/comment/delete_comment.php`, {\n            commentId,\n            userId: (getAuth() as AuthStorageType)['userId'],\n          })\n          .then(() => {\n            alert('댓글 삭제 성공');\n            getCommentsInfo();\n          })\n          .catch((error) => {\n            alert(error.response.data);\n          });\n      }\n    } else alert('로그인을 해주세요');\n  };\n\n  useEffect(() => {\n    getArticleInfo();\n    getCommentsInfo();\n  }, []);\n\n  return articleObj ? (\n    <>\n      <div>\n        <div className=\"article-title\">\n          <div className=\"font-28\">{articleObj['title']}</div>\n          {getAuth() && articleObj['userId'] === (getAuth() as AuthStorageType)['userId'] ? (\n            <div className=\"delete_button\" onClick={() => deleteArticle()}>\n              삭제\n            </div>\n          ) : null}\n        </div>\n        <div className=\"article-writter\">\n          <span className=\"margin_right_10px font-18\">{articleObj['loginId']}</span>\n          <span className=\"font-11\">2일 전</span>\n        </div>\n        <div className=\"article-content\">\n          <span>{articleObj['content']}</span>\n        </div>\n        <div className=\"article-comment_box\">\n          <div className=\"article-comment_count\">100개의 댓글</div>\n          <textarea\n            className={`article-comment_textarea`}\n            onChange={(e) => setArticleContent(e.target.value)}\n            cols={100}\n            rows={10}\n            placeholder=\"글을 작성해주세요\"\n          />\n          <div className=\"article-comment_btn\">\n            <div className=\"button\" onClick={postComment}>\n              입력\n            </div>\n          </div>\n        </div>\n        {commentsArr.length\n          ? commentsArr.map((commentsObj) => (\n              <div key={commentsObj['commentId']} className=\"article-comments\">\n                <div className=\"article-comments-profile\">\n                  <div className=\"article-comments-profile-name\">\n                    <div className=\"font-20\">{commentsObj['loginId']}</div>\n                    {getAuth() &&\n                    commentsObj['userId'] === (getAuth() as AuthStorageType)['userId'] ? (\n                      <div\n                        className=\"delete_button\"\n                        onClick={() => deleteComment(commentsObj['commentId'])}\n                      >\n                        삭제\n                      </div>\n                    ) : null}\n                  </div>\n                  <div>1일전</div>\n                </div>\n                <div className=\"article-comments-comment\">\n                  <span>{commentsObj['content']}</span>\n                </div>\n              </div>\n            ))\n          : null}\n      </div>\n    </>\n  ) : null;\n};\n\nexport default Article;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".article-title {\\n    display: flex;\\n    justify-content: space-between;\\n    margin-bottom: 8px;\\n}\\n\\n.article-writter {\\n    padding-bottom: 20px;\\n    margin-bottom: 40px;\\n    border-bottom: 1px solid rgb(207, 209, 209);\\n}\\n\\n.article-content {\\n    margin-bottom: 40px;\\n}\\n\\n.article-comment_count {\\n    font-size: 20px;\\n    padding-top: 20px;\\n    margin-bottom: 30px;\\n}\\n\\n.article-comment_textarea {\\n    width: 100%;\\n}\\n\\n.article-comment_btn {\\n    display: flex;\\n    justify-content: flex-end;\\n    margin: 10px 0 30px 0;\\n}\\n\\n.article-comment_textarea:focus {\\n    outline: none;\\n}\\n\\n.article-comments {\\n    padding: 15px 0;\\n    border-bottom: 1px solid rgb(194, 194, 194);\\n}\\n\\n.article-comments-profile {\\n    margin-bottom: 15px;\\n}\\n\\n.article-comments-profile-name {\\n    display: flex;\\n    justify-content: space-between;\\n    /* font-size: 20px; */\\n    margin-bottom: 5px;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./css/Article/Article.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,aAAa;IACb,8BAA8B;IAC9B,kBAAkB;AACtB;;AAEA;IACI,oBAAoB;IACpB,mBAAmB;IACnB,2CAA2C;AAC/C;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,eAAe;IACf,iBAAiB;IACjB,mBAAmB;AACvB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,aAAa;IACb,yBAAyB;IACzB,qBAAqB;AACzB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,eAAe;IACf,2CAA2C;AAC/C;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,8BAA8B;IAC9B,qBAAqB;IACrB,kBAAkB;AACtB\",\"sourcesContent\":[\".article-title {\\n    display: flex;\\n    justify-content: space-between;\\n    margin-bottom: 8px;\\n}\\n\\n.article-writter {\\n    padding-bottom: 20px;\\n    margin-bottom: 40px;\\n    border-bottom: 1px solid rgb(207, 209, 209);\\n}\\n\\n.article-content {\\n    margin-bottom: 40px;\\n}\\n\\n.article-comment_count {\\n    font-size: 20px;\\n    padding-top: 20px;\\n    margin-bottom: 30px;\\n}\\n\\n.article-comment_textarea {\\n    width: 100%;\\n}\\n\\n.article-comment_btn {\\n    display: flex;\\n    justify-content: flex-end;\\n    margin: 10px 0 30px 0;\\n}\\n\\n.article-comment_textarea:focus {\\n    outline: none;\\n}\\n\\n.article-comments {\\n    padding: 15px 0;\\n    border-bottom: 1px solid rgb(194, 194, 194);\\n}\\n\\n.article-comments-profile {\\n    margin-bottom: 15px;\\n}\\n\\n.article-comments-profile-name {\\n    display: flex;\\n    justify-content: space-between;\\n    /* font-size: 20px; */\\n    margin-bottom: 5px;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["AUTH","clearAuth","localStorage","clear","saveAuth","token","setItem","JSON","stringify","expire","Date","now","expireDays","getAuth","getItem","authObj","parse","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","articleId","useParams","navigate","useNavigate","articleObj","setArticleObj","useState","commentsArr","setCommentsArr","articleContent","setArticleContent","getCommentsInfo","axios","then","res","data","catch","error","alert","response","useEffect","className","onClick","window","confirm","boardId","parseInt","userId","onChange","e","target","value","cols","rows","placeholder","loginId","content","length","map","commentsObj","key","deleteComment","commentId","___CSS_LOADER_EXPORT___","push","module","id"],"sourceRoot":""}